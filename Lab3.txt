-- Question 1
CREATE TABLE AIRDB_ALL_INFO AS SELECT * FROM CNIT372TA.AIRDB_ALL_INFO;
/
-- Question 2
Alter table AIRDB_ALL_INFO modify ( ORIGIN_CITY_NAME not null);
Alter table AIRDB_ALL_INFO modify ( DEST_CITY_NAME not null);
Alter table AIRDB_ALL_INFO modify ( ORIGIN_STATE_NM not null);
Alter table AIRDB_ALL_INFO modify ( DEST_STATE_NM not null);
Alter table AIRDB_ALL_INFO add constraint unique_q2 UNIQUE (Origin_Airport_ID, Dest_Airport_ID, Fl_Num, Carrier, Fl_Date);
/
-- Question 3
SELECT * FROM User_Constraints WHERE Table_Name = 'AIRDB_ALL_INFO';
/
-- Question 4
CREATE TABLE AIRDB_CLONE AS SELECT * FROM AIRDB_ALL_INFO;
/
-- Question 5
SELECT * FROM User_Constraints WHERE Table_Name = 'AIRDB_CLONE';
-- The cloned table has the not null constraints (as well as the contstaints for question 9 from checkoff) but is missing the constraint to make Origin_Airport_ID, Dest_Airport_ID, Fl_Num, Carrier, and Fl_Date combined a unique value
/
-- Question 6
Alter table AIRDB_CLONE add constraint unique_q6 UNIQUE (Origin_Airport_ID, Dest_Airport_ID, Fl_Num, Carrier, Fl_Date);
/
-- Question 7
CREATE TABLE AIRDB_AIRPORTS (
AIRPORT_ID number NOT NULL, CITY_MARKET_ID number, AIRPORT_CODE VARCHAR2(3 BYTE), CITY_NAME VARCHAR2(30 BYTE), STATE_ABR VARCHAR2(2 BYTE), STATE_FIPS number, STATE_NAME VARCHAR2(30 BYTE), 
primary key (AIRPORT_ID)
);
/
-- Question 8
insert into AIRDB_AIRPORTS
select * from
(select origin_airport_id, ORIGIN_CITY_MARKET_ID, ORIGIN, ORIGIN_CITY_NAME, ORIGIN_STATE_ABR, ORIGIN_STATE_FIPS, ORIGIN_STATE_NM
from AIRDB_ALL_INFO
union all
select dest_airport_id, DEST_CITY_MARKET_ID, DEST, DEST_CITY_NAME, DEST_STATE_ABR, DEST_STATE_FIPS, DEST_STATE_NM
from AIRDB_ALL_INFO)

insert into AIRDB_AIRPORTS
select * from
(select origin_airport_id, ORIGIN_CITY_MARKET_ID, ORIGIN, ORIGIN_CITY_NAME, ORIGIN_STATE_ABR, ORIGIN_STATE_FIPS, ORIGIN_STATE_NM
from AIRDB_ALL_INFO
union
select dest_airport_id, DEST_CITY_MARKET_ID, DEST, DEST_CITY_NAME, DEST_STATE_ABR, DEST_STATE_FIPS, DEST_STATE_NM
from AIRDB_ALL_INFO)
-- When you use UNION ALL, the union includes duplicate rows. Duplicate Rows will have matching airport_id fields and as a primary key each must be unique, causing the error
/
-- Question 9
Alter table AIRDB_CLONE
Add constraint origin_FK_q8
foreign key (ORIGIN_AIRPORT_ID) references AIRDB_AIRPORTS(AIRPORT_ID);
Alter table AIRDB_CLONE
Add constraint dest_FK_q8
foreign key (DEST_AIRPORT_ID) references AIRDB_AIRPORTS(AIRPORT_ID);
/
-- Question 10
Alter table AIRDB_CLONE
drop (Origin_City_Market_ID, Origin_State_Fips, Dest_City_Market_ID, Dest_State_Fips);
/
-- Question 11
Alter table AIRDB_AIRPORTS add constraint 
chk_state_Q11 CHECK (STATE_ABR in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'));
-- The error message is quite clear about why the constraint cannot be applied - there's at least one record that has a STATE_ABR value that isn't one of the 50 acceptable values - specifically the ones in Puerto Rico and the US Virgin Islands
/
-- Question 12
Alter table AIRDB_AIRPORTS add constraint 
chk_state_Q11 CHECK (STATE_ABR in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'))
disable;
SELECT * FROM User_Constraints WHERE Table_Name = 'AIRDB_AIRPORTS';
/
-- Question 13
DELETE FROM AIRDB_AIRPORTS
where State_Abr not in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY');
-- The error is because the records that would be removed have linked records in the AIRDB_CLONE table and the refferential integrity constraints won't let you delete the records
/
-- Question 14
Alter Table AIRDB_CLONE
drop constraint dest_FK_q8;
Alter table AIRDB_CLONE
Add constraint dest_FK_q14
foreign key (DEST_AIRPORT_ID) references AIRDB_AIRPORTS(AIRPORT_ID)
on delete set null;
/
-- Question 15
Alter Table AIRDB_CLONE
drop constraint origin_FK_q8;
Alter table AIRDB_CLONE
Add constraint origin_FK_q14
foreign key (ORIGIN_AIRPORT_ID) references AIRDB_AIRPORTS(AIRPORT_ID)
on delete cascade;
/
-- Question 16
DELETE FROM AIRDB_AIRPORTS
where State_Abr not in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY');
-- Unlike in Q13, the referential integrity is preserved as when the record is deleted, the child records are either deleted or set to null
/
-- Question 17
Alter Table AIRDB_AIRPORTS
enable Constraint chk_state_Q11;
-- It works now because the 5 rows with State_Abr values that were not in the acceptable values have been removed
/
-- Question 18
select Count(*) as Null_Dest_Id
from AIRDB_CLONE
where DEST_AIRPORT_ID is null;
select Count(*) as Null_Origin_Id
from AIRDB_CLONE
where ORIGIN_AIRPORT_ID is null;
-- It makes more sense to use the DELETE CASCADE option, as the database does not seem to keep records pertaining to airports it doesn't have information on.
/
-- Question 19
Alter Table AIRDB_AIRPORTS add constraint
unique_q19 UNIQUE (AIRPORT_CODE);
Alter Table AIRDB_AIRPORTS modify (AIRPORT_CODE not null);
/
-- Question 20
Alter Table AIRDB_AIRPORTS add constraint
unique_q20 UNIQUE (CITY_NAME);
-- There can be multiple airports in one city, therefore multiple records can and do have the same City Name. You cannot apply a constraint to a table with records that would violate that constraint
/
-- Question 21
DROP TABLE AIRDB_ALL_INFO CASCADE CONSTRAINTS;
DROP TABLE AIRDB_CLONE CASCADE CONSTRAINTS;
DROP TABLE AIRDB_AIRPORTS CASCADE CONSTRAINTS;
/

/* Results

Question 1
Table AIRDB_ALL_INFO created.

Question 2
Table AIRDB_ALL_INFO altered.


Table AIRDB_ALL_INFO altered.


Table AIRDB_ALL_INFO altered.


Table AIRDB_ALL_INFO altered.

Table AIRDB_ALL_INFO altered.

Question 3
OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
WAGNE208                                                                                                                         SYS_C00629163                                                                                                                    C AIRDB_ALL_INFO                                                                                                                   "ORIGIN_CITY_NAME" IS NOT NULL                                                   
"ORIGIN_CITY_NAME" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         SYS_C00629184                                                                                                                    C AIRDB_ALL_INFO                                                                                                                   "DEST_CITY_NAME" IS NOT NULL                                                     
"DEST_CITY_NAME" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------

WAGNE208                                                                                                                         SYS_C00629185                                                                                                                    C AIRDB_ALL_INFO                                                                                                                   "ORIGIN_STATE_NM" IS NOT NULL                                                    
"ORIGIN_STATE_NM" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         SYS_C00629186                                                                                                                    C AIRDB_ALL_INFO                                                                                                                   "DEST_STATE_NM" IS NOT NULL                                                      
"DEST_STATE_NM" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         UNIQUE_Q2                                                                                                                        U AIRDB_ALL_INFO                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     USER NAME               11-SEP-19 WAGNE208                                                                                                                         UNIQUE_Q2                                                                                                                                                           0

Question 4
Table AIRDB_CLONE created.

Question 5
OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
WAGNE208                                                                                                                         SYS_C00629189                                                                                                                    C AIRDB_CLONE                                                                                                                      "ORIGIN_CITY_NAME" IS NOT NULL                                                   
"ORIGIN_CITY_NAME" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         SYS_C00629190                                                                                                                    C AIRDB_CLONE                                                                                                                      "ORIGIN_STATE_NM" IS NOT NULL                                                    
"ORIGIN_STATE_NM" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------

WAGNE208                                                                                                                         SYS_C00629191                                                                                                                    C AIRDB_CLONE                                                                                                                      "DEST_CITY_NAME" IS NOT NULL                                                     
"DEST_CITY_NAME" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         SYS_C00629192                                                                                                                    C AIRDB_CLONE                                                                                                                      "DEST_STATE_NM" IS NOT NULL                                                      
"DEST_STATE_NM" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         ORIGIN_FK_Q8                                                                                                                     R AIRDB_CLONE                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
WAGNE208                                                                                                                         SYS_C00629261                                                                                                                    NO ACTION ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     USER NAME               11-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         DEST_FK_Q8                                                                                                                       R AIRDB_CLONE                                                                                                                                                                                                       

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
WAGNE208                                                                                                                         SYS_C00629261                                                                                                                    NO ACTION ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     USER NAME               11-SEP-19                                                                                                                                                                                                                                                                                                      0



Question 6
Table AIRDB_CLONE altered.

Question 7
Table AIRDB_AIRPORTS created.

Question 8
Error starting at line : 1 in command -
insert into AIRDB_AIRPORTS
select * from
(select origin_airport_id, ORIGIN_CITY_MARKET_ID, ORIGIN, ORIGIN_CITY_NAME, ORIGIN_STATE_ABR, ORIGIN_STATE_FIPS, ORIGIN_STATE_NM
from AIRDB_ALL_INFO
union all
select dest_airport_id, DEST_CITY_MARKET_ID, DEST, DEST_CITY_NAME, DEST_STATE_ABR, DEST_STATE_FIPS, DEST_STATE_NM
from AIRDB_ALL_INFO)
Error report -
ORA-00001: unique constraint (WAGNE208.SYS_C00629261) violated

294 rows inserted.

Question 9
Table AIRDB_CLONE altered.


Table AIRDB_CLONE altered.

Question 10
Table AIRDB_CLONE altered.


Table AIRDB_CLONE altered.

Question 10
Table AIRDB_CLONE altered.

Question 11
Error starting at line : 1 in command -
Alter table AIRDB_AIRPORTS add constraint 
chk_state_Q11 CHECK (STATE_ABR in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'))
Error report -
ORA-02293: cannot validate (WAGNE208.CHK_STATE_Q11) - check constraint violated
02293. 00000 - "cannot validate (%s.%s) - check constraint violated"
*Cause:    an alter table operation tried to validate a check constraint to
           populated table that had nocomplying values.
*Action:   Obvious

Question 12
Table AIRDB_AIRPORTS altered.


OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------
WAGNE208                                                                                                                         CHK_STATE_Q11                                                                                                                    C AIRDB_AIRPORTS                                                                                                                   STATE_ABR in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI',  
STATE_ABR in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY')                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                            DISABLED NOT DEFERRABLE IMMEDIATE NOT VALIDATED USER NAME               17-SEP-19                                                                                                                                                                                                                                                                                                      0

WAGNE208                                                                                                                         SYS_C00629260                                                                                                                    C AIRDB_AIRPORTS                                                                                                                   "AIRPORT_ID" IS NOT NULL                                                         
"AIRPORT_ID" IS NOT NULL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19                                                                                                                                                                                                                                                                                                      0

OWNER                                                                                                                            CONSTRAINT_NAME                                                                                                                  C TABLE_NAME                                                                                                                       SEARCH_CONDITION
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- - -------------------------------------------------------------------------------------------------------------------------------- --------------------------------------------------------------------------------
SEARCH_CONDITION_VC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
R_OWNER                                                                                                                          R_CONSTRAINT_NAME                                                                                                                DELETE_RU STATUS   DEFERRABLE     DEFERRED  VALIDATED     GENERATED      BAD RELY LAST_CHAN INDEX_OWNER                                                                                                                      INDEX_NAME                                                                                                                       INVALID VIEW_RELATED   ORIGIN_CON_ID
-------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- --------- -------- -------------- --------- ------------- -------------- --- ---- --------- -------------------------------------------------------------------------------------------------------------------------------- -------------------------------------------------------------------------------------------------------------------------------- ------- -------------- -------------

WAGNE208                                                                                                                         SYS_C00629261                                                                                                                    P AIRDB_AIRPORTS                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                            ENABLED  NOT DEFERRABLE IMMEDIATE VALIDATED     GENERATED NAME          11-SEP-19 WAGNE208                                                                                                                         SYS_C00629261                                                                                                                                                       0

Question 13
Error starting at line : 1 in command -
DELETE FROM AIRDB_AIRPORTS
where State_Abr not in ('AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY')
Error report -
ORA-02292: integrity constraint (WAGNE208.ORIGIN_FK_Q8) violated - child record found

Question 14
Table AIRDB_CLONE altered.


Table AIRDB_CLONE altered.

Question 15
Table AIRDB_CLONE altered.


Table AIRDB_CLONE altered.

Question 16
5 rows deleted.

Question 17
Table AIRDB_AIRPORTS altered.

Question 18
NULL_ORIGIN_ID
--------------
             0

Question 19
Table AIRDB_AIRPORTS altered.


Table AIRDB_AIRPORTS altered.

Question 20
Error starting at line : 1 in command -
Alter Table AIRDB_AIRPORTS add constraint
unique_q20 UNIQUE (CITY_NAME)
Error report -
ORA-02299: cannot validate (WAGNE208.UNIQUE_Q20) - duplicate keys found
02299. 00000 - "cannot validate (%s.%s) - duplicate keys found"
*Cause:    an alter table validating constraint failed because the table has
           duplicate key values.
*Action:   Obvious


*/